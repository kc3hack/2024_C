<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>地図表示ページ</title>
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css" />
		<script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
		<script>
			var my_latitude = 0
			var my_longitude = 0

			//navigator.geolocation.getCurrentPosition(test2);

			/*
			function init() {


				//地図を表示するdiv要素のidを設定
				var map = L.map('mapcontainer');
				alert(my_latitude)
				//地図の中心とズームレベルを指定
				map.setView([35.40, 136], 100);

				//map.setView([my_latitude, my_longitude], 100);

				//表示するタイルレイヤのURLとAttributionコントロールの記述を設定して、地図に追加する
				L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
					attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
				}).addTo(map);

			}
			*/
			

			
			function test() {
				navigator.geolocation.getCurrentPosition(test2);
			}
			

			function test2(position) {

				my_latitude = position.coords.latitude
				my_longitude = position.coords.longitude

				//地図を表示するdiv要素のidを設定
				var map = L.map('mapcontainer');
				//alert(my_latitude)
				//地図の中心とズームレベルを指定
				//map.setView([35.40, 136], 100);
				map.setView([my_latitude, my_longitude], 100);

				//map.setView([my_latitude, my_longitude], 100);

				//表示するタイルレイヤのURLとAttributionコントロールの記述を設定して、地図に追加する
				L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
					attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
				}).addTo(map);



				/*
				var geo_text = "緯度:" + position.coords.latitude + "\n";
				geo_text += "経度:" + position.coords.longitude + "\n";
				geo_text += "高度:" + position.coords.altitude + "\n";
				geo_text += "位置精度:" + position.coords.accuracy + "\n";
				geo_text += "高度精度:" + position.coords.altitudeAccuracy  + "\n";
				geo_text += "移動方向:" + position.coords.heading + "\n";
				geo_text += "速度:" + position.coords.speed + "\n";

				var date = new Date(position.timestamp);

				geo_text += "取得時刻:" + date.toLocaleString() + "\n";

				alert(geo_text);
				*/
			}
		</script>
	</head>
	<body onload="init()">
		<div id="mapcontainer" style="width:600px;height:600px"></div>

		<!--指定したURLに行けるボタン-->
		<form action="/loop_speech_recognition" method="get">
			<input type="submit" value='音声ページへ行く!'>
		</form>

		<button onclick="test()">test</button>
	</body>
</html>